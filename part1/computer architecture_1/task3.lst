GAS LISTING task3.S 			page 1


   1              	/*
   2              	 * ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð²Ð²Ð¾Ð´Ð° ÐºÐ¾Ð´Ð¾Ð² Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¸ Ð²Ñ‹
   3              	 */
   4              	
   5              	.include "my-macro"
   1              	/* 
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 * 	- ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit
  11              		movl \ret_val, %ebx 	# ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              		int $0x80 		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð
  18              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  19              	 * 	- Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„Ñ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  20              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  21              	 *	- Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  22              	 *	- Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»
  23              	 * 
  24              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  25              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  26              	*/
  27              	.macro Getchar buf_addr
  28              		movl $3, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  29              		movl $0, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  30              		movl \buf_addr, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐº
  31              		     			# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  32              		movl $1, %edx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  33              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  34              	.endm
  35              	
  36              	/*
  37              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² ÑÑ‚Ð°Ð½Ð´
  38              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  39              	 * 	- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  40              	 *
  41              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  42              	 *	Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸" 
  43              	 *
  44              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  45              	 *	- Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº
  46              	 *	  Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸
  47              	 *	
  48              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  49              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  50              	*/
  51              	.macro Puts string
  52              	.data
GAS LISTING task3.S 			page 2


  53              	    str\@: 	.ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»
  54              		
  55              	    strlen\@ = 	. - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  56              	
  57              	.text
  58              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  59              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  60              		movl $str\@, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾
  61              		movl $strlen\@, %edx 	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  62              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  63              	.endm
  64              	
   6              	
   7              	.bss
   8              	    .lcomm buf, 100 # Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð². Ð
   9              	    .lcomm c, 1	# Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°. Ð Ð°Ð·Ð¼ÐµÑ€ - 1 
  10              	    .lcomm s,10	
  11              	.text
  12              	.global _start
  13              	
  14              	_start:
  15 0000 29F6     	    sub	%esi, %esi     # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð°Ð´Ñ€ÐµÑÐ° Ð±Ð°Ð¹Ñ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð
  16 0002 C6056800 	    movb $10,s    
  16      00000A
  17              	
  18              	show_prompt:
  19              	    Puts "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ, Ð´Ñ€ÑƒÐ³ Ð¼Ð¾Ð¹!" 	# Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð
  19              	> .data
  19 0000 D092D0B2 	>  str0:.ascii "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ, Ð´Ñ€ÑƒÐ³ Ð¼Ð¾Ð¹!\n"
  19      D0BED0B4 
  19      D0B8D182 
  19      D0B520D1 
  19      86D0B8D1 
  19              	>  
  19              	>  strlen0 =. - str0
  19              	> 
  19              	> .text
  19 0009 B8040000 	>  movl $4,%eax
  19      00
  19 000e BB010000 	>  movl $1,%ebx
  19      00
  19 0013 B9000000 	>  movl $str0,%ecx
  19      00
  19 0018 BA2C0000 	>  movl $strlen0,%edx
  19      00
  19 001d CD80     	>  int $0x80
  20              						# Ð²Ñ‹Ð²Ð¾Ð´ (Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ° Ð²Ð²Ð¾Ð´Ð°)
  21              	
  22              	kbd_input:
  23              	    Getchar $c          # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ÑÐ¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð
  23 001f B8030000 	>  movl $3,%eax
  23      00
  23 0024 BB000000 	>  movl $0,%ebx
  23      00
  23 0029 B9640000 	>  movl $c,%ecx
  23      00
  23              	>  
GAS LISTING task3.S 			page 3


  23 002e BA010000 	>  movl $1,%edx
  23      00
  23 0033 CD80     	>  int $0x80
  24              	    
  25 0035 83F800   	    cmpl $0, %eax 	# ÐšÐ¾Ð½ÐµÑ† Ñ„Ð°Ð¹Ð» - EOF (Ð²Ð²ÐµÐ´ÐµÐ½Ð¾ 0 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²) ? 
  26 0038 0F849500 	    je stop		# Ð”Ð° - Ð½Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  26      0000
  27              	    
  28 003e 803D6400 	    cmpb $'\n', c 	# ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ ?
  28      00000A
  29 0045 7471     	    je T1
  30 0047 803D6400 	    cmpb $'9', c  	# ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '9' ?
  30      000039
  31 004e 7735     	    ja print_err_msg	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  32 0050 803D6400 	    cmpb $'0', c	# ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0' ?
  32      000030
  33 0057 722C     	    jb print_err_msg	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  34 0059 3B356800 	    cmp s,%esi
  34      0000
  35 005f 743F     	    je buff_end
  36              	
  37 0061 A0640000 	    movb c, %al         # ÐºÐ¾Ð´ Ð¸Ð· Ñ Ð¿Ð¸ÑˆÐµÐ¼ Ð² al
  37      00
  38 0066 88860000 	    movb %al, buf(%esi) # Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ al (Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾
  38      0000
  39              				# Ð°Ð´Ñ€ÐµÑÑƒ buf + esi (Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)
  40 006c 46       	    incl %esi		# ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑŽ
  41              	
  42              	    Puts "Ð¦Ð¸Ñ„Ñ€Ð°! Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾." # Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ Ð²Ð²Ð¾Ð´
  42              	> .data
  42 002c D0A6D0B8 	>  str2:.ascii "Ð¦Ð¸Ñ„Ñ€Ð°! Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾.\n"
  42      D184D180 
  42      D0B02120 
  42      D0A5D0BE 
  42      D180D0BE 
  42              	>  
  42              	>  strlen2 =. - str2
  42              	> 
  42              	> .text
  42 006d B8040000 	>  movl $4,%eax
  42      00
  42 0072 BB010000 	>  movl $1,%ebx
  42      00
  42 0077 B92C0000 	>  movl $str2,%ecx
  42      00
  42 007c BA1A0000 	>  movl $strlen2,%edx
  42      00
  42 0081 CD80     	>  int $0x80
  43              	    
  44 0083 EB84     	    jmp show_prompt	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  45              	
  46              	print_err_msg:
  47              	    Puts "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´"	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ
  47              	> .data
  47 0046 D09DD0B5 	>  str3:.ascii "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´\n"
  47      20D186D0 
  47      B8D184D1 
GAS LISTING task3.S 			page 4


  47      80D0BED0 
  47      B2D0B0D1 
  47              	>  
  47              	>  strlen3 =. - str3
  47              	> 
  47              	> .text
  47 0085 B8040000 	>  movl $4,%eax
  47      00
  47 008a BB010000 	>  movl $1,%ebx
  47      00
  47 008f B9460000 	>  movl $str3,%ecx
  47      00
  47 0094 BA420000 	>  movl $strlen3,%edx
  47      00
  47 0099 CD80     	>  int $0x80
  48 009b E969FFFF 	    jmp show_prompt 	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  48      FF
  49              	buff_end:
  50              		Puts "ÐÐµÑ‚Ñƒ Ð¼ÐµÑÑ‚Ð°"
  50              	> .data
  50 0088 D09DD0B5 	>  str4:.ascii "ÐÐµÑ‚Ñƒ Ð¼ÐµÑÑ‚Ð°\n"
  50      D182D183 
  50      20D0BCD0 
  50      B5D181D1 
  50      82D0B00A 
  50              	>  
  50              	>  strlen4 =. - str4
  50              	> 
  50              	> .text
  50 00a0 B8040000 	>  movl $4,%eax
  50      00
  50 00a5 BB010000 	>  movl $1,%ebx
  50      00
  50 00aa B9880000 	>  movl $str4,%ecx
  50      00
  50 00af BA140000 	>  movl $strlen4,%edx
  50      00
  50 00b4 CD80     	>  int $0x80
  51 00b6 EB1B     		jmp stop
  52              	
  53              	T1:
  54 00b8 83FE00   		cmp $0, %esi #
  55 00bb 0F845EFF 		je kbd_input #ÐµÑÐ»Ð¸ esi Ñ€Ð°Ð²Ð½Ð¾ 0 Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð½Ð° Ð¼ÐµÑ‚ÐºÑƒ kbd_input
  55      FFFF
  56 00c1 4E       		decl %esi # ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ esi Ð½Ð° 1 
  57 00c2 8A9E0000 		movb buf(%esi),%bl #  Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸Ð· Ð±ÑƒÑ„ÐµÑ€Ð° (buf+%esi) Ð² ebx
  57      0000
  58 00c8 83EB30   		sub $48,%ebx # Ð²Ñ‹Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ð¸Ð· ebx 48
  59 00cb 89D8     		mov %ebx,%eax # Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð² eax ebx
  60 00cd 46       		incl %esi # ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð½Ð° 1
  61 00ce E94CFFFF 		jmp kbd_input # Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð½Ð° Ð¼ÐµÑ‚ÐºÑƒ kbd_input
  61      FF
  62              	
  63              	stop:
  64              	    Exit $0
  64 00d3 B8010000 	>  movl $1,%eax
  64      00
GAS LISTING task3.S 			page 5


  64 00d8 BB000000 	>  movl $0,%ebx
  64      00
  64 00dd CD80     	>  int $0x80
  65              	    
  66              	.end
GAS LISTING task3.S 			page 6


DEFINED SYMBOLS
             task3.S:8      .bss:0000000000000000 buf
             task3.S:8      .bss:0000000000000064 c
             task3.S:10     .bss:0000000000000068 s
             task3.S:14     .text:0000000000000000 _start
             task3.S:18     .text:0000000000000009 show_prompt
             task3.S:19     .data:0000000000000000 str0
             task3.S:19     *ABS*:000000000000002c strlen0
             task3.S:22     .text:000000000000001f kbd_input
             task3.S:63     .text:00000000000000d3 stop
             task3.S:53     .text:00000000000000b8 T1
             task3.S:46     .text:0000000000000085 print_err_msg
             task3.S:49     .text:00000000000000a0 buff_end
             task3.S:42     .data:000000000000002c str2
             task3.S:42     *ABS*:000000000000001a strlen2
             task3.S:47     .data:0000000000000046 str3
             task3.S:47     *ABS*:0000000000000042 strlen3
             task3.S:50     .data:0000000000000088 str4
             task3.S:50     *ABS*:0000000000000014 strlen4

NO UNDEFINED SYMBOLS
